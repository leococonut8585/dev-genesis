.PHONY: all build run clean test

BINARY_NAME=dev-genesis
BINARY_PATH=../$(BINARY_NAME)

all: build

build:
	@echo "ðŸ”¨ Building Dev Genesis..."
	go build -o $(BINARY_PATH) cmd/server/main.go
	@echo "âœ… Build complete: $(BINARY_PATH)"

run: build
	@echo "ðŸš€ Starting Dev Genesis..."
	$(BINARY_PATH)

clean:
	@echo "ðŸ§¹ Cleaning..."
	go clean
	rm -f $(BINARY_PATH)
	rm -f $(BINARY_PATH).exe

test:
	@echo "ðŸ§ª Running tests..."
	go test -v ./...

deps:
	@echo "ðŸ“¦ Installing dependencies..."
	go mod download
	go mod tidy

# Windows specific build
build-windows:
	@echo "ðŸ”¨ Building for Windows..."
	GOOS=windows GOARCH=amd64 go build -o $(BINARY_PATH).exe cmd/server/main.go
	@echo "âœ… Windows build complete: $(BINARY_PATH).exe"